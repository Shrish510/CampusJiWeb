<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contact Repository - CampusJi</title>
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/contact.css">
<link rel="icon" href="images/Campusjilogo.jpg" type="image/x-icon" style="border-radius: 50%;">
<style>
    .star-icon {
        cursor: pointer;
        margin-left: 8px;
        font-size: 1.2em;
        color: #cccccc; /* Default empty star color */
        transition: color 0.2s ease-in-out;
        user-select: none; /* Prevents text selection on click */
    }
    .star-icon:hover {
        color: #aaaaaa;
    }
    .star-icon.starred {
        color: #ffc107; /* Gold color for a filled star */
    }
    /* Style for the new filter button */
    .filter-button {
        padding: 10px 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1em;
        margin-left: 8px;
        transition: background-color 0.2s;
    }
    .filter-button:hover {
        background-color: #0056b3;
    }
    /* Style for when the filter is active */
    .filter-button.active {
        background-color: #c43a3a; /* A red color to indicate "Show All" state */
    }
</style>
</head>
<body>
<div id="header-container"></div>
<main class="main-content">
<h1 class="page-title">Contact Repository</h1>
<div class="search-section">
<div class="search-container">
<input type="text" id="searchInput" class="search-input" placeholder="Search by name, profession, or contact number...">
<button class="search-button" id="searchButton">Search</button>
<button class="clear-search" id="clearButton">Clear</button>
<button class="filter-button" id="showStarredButton">Show Starred ‚òÖ</button>
</div>
</div>
<div class="table-section">
<div class="results-counter" id="resultsCounter">Showing all 33 contacts</div>
<table class="contact-table">
<thead>
<tr>
<th class="category-header" colspan="4">Authorities</th>
</tr>
<tr>
<th class="table-header">Name</th>
<th class="table-header">Profession/Role</th>
<th class="table-header">Contact Number</th>
</tr>
</thead>
<tbody id="authoritiesSection">
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Dushyanth Reddy <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Assistant Manager Programme</td><td class="contact-cell contact-number">01262-228539/ +917082001615</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Mr. Suresh Khatri <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Administrative Officer</td><td class="contact-cell contact-number">01262-228606</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Dr. Peeyush Pandey <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Co-Chairperson, IPM</td><td class="contact-cell contact-number">01262-228526</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Dr. Abhishek Singh <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Co-Chairperson, IPM</td><td class="contact-cell contact-number">01262-228624</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Mr. Pushkar Kashyap <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Asst. Manager Admissions and Administration</td><td class="contact-cell contact-number">01262-228527</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Dr. Deepika Jain <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Co-Chairperson Students Affairs</td><td class="contact-cell contact-number">01262-228557</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Dr. Akanksha Saxena <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Co-Chairperson Students Affairs</td><td class="contact-cell contact-number">01262-228618</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Mr. Deepak Rohilla <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">HSA Officer</td><td class="contact-cell contact-number">+917082001632</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Mr. Kamal Kishore Joshi <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Librarian</td><td class="contact-cell contact-number">02162-228509</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Dr Koustab Ghosh <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Dean Academics</td><td class="contact-cell contact-number">01262-228525</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Dr S K Pandey <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Dean (REE)</td><td class="contact-cell contact-number">01262-274054</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Mr Parikshit R Java <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Senior Administrative Officer</td><td class="contact-cell contact-number">01262-228600</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Mr Sachin <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Office Assistant</td><td class="contact-cell contact-number">01262-228503/+917082001603</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Mr Priyanka Darji <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">FA & CAO</td><td class="contact-cell contact-number">01262-274053</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Mr Kamlesh Pal <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">System Administrator</td><td class="contact-cell contact-number">01262-228510</td></tr>
<tr class="contact-row" data-category="authorities"><td class="contact-cell contact-name">Mr Dharmesh Bajpai <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Programmer</td><td class="contact-cell contact-number">01262-228542</td></tr>
</tbody>
<thead>
<tr>
<th class="category-header" colspan="3">Campus Services</th>
</tr>
<tr>
<th class="table-header">Name</th>
<th class="table-header">Profession/Role</th>
<th class="table-header">Contact Number</th>
</tr>
</thead>
<tbody id="campusServicesSection">
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">Mr. Narayan Singh Rathi <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Medical Emergency</td><td class="contact-cell contact-number">+917082001632</td></tr>
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">Ambulance Main Gate Security <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Operating hours: 9:00 pm to 6:00 am</td><td class="contact-cell contact-number">01262-228561</td></tr>
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">Health Supervisor <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Health Supervisor</td><td class="contact-cell contact-number">+917082118100</td></tr>
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">Mr. Rishabh <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Maintenance Junior Engineer (Electrical)</td><td class="contact-cell contact-number">+919050387213</td></tr>
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">Mr. Pratham <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Maintenance Junior Engineer (Civil)</td><td class="contact-cell contact-number">+918950258508</td></tr>
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">Oshan Rai <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Student Council President</td><td class="contact-cell contact-number">+917354236136</td></tr>
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">Shashwat Singh <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Student Council Vice President</td><td class="contact-cell contact-number">+918354899928</td></tr>
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">RMO (Male) <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Kainos Super Speciality Hospital, Monday to Saturday, 1:00 pm to 5:00 pm, Student Activity Centre</td><td class="contact-cell contact-number">-</td></tr>
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">RMO (Feamale) <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Holy Heart Hospital, Monday to Saturday, 10:00 am to 12:00 pm, Student Activity Centre</td><td class="contact-cell contact-number">-</td></tr>
<tr class="contact-row" data-category="campus-services"><td class="contact-cell contact-name">Laundry <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Laundry Service</td><td class="contact-cell contact-number">+919034663026</td></tr>
</tbody>
<thead>
<tr>
<th class="category-header" colspan="3">Local Services</th>
</tr>
<tr>
<th class="table-header">Name</th>
<th class="table-header">Profession/Role</th>
<th class="table-header">Contact Number</th>
</tr>
</thead>
<tbody id="localServicesSection">
<tr class="contact-row" data-category="local-services"><td class="contact-cell contact-name">Rahul <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Delivery Man</td><td class="contact-cell contact-number">+917494873259</td></tr>
<tr class="contact-row" data-category="local-services"><td class="contact-cell contact-name">Azad <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Local Delivery Man</td><td class="contact-cell contact-number">+919315421193</td></tr>
<tr class="contact-row" data-category="local-services"><td class="contact-cell contact-name">Dhaba 24 <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Restaurant</td><td class="contact-cell contact-number">+918813078398</td></tr>
<tr class="contact-row" data-category="local-services"><td class="contact-cell contact-name">Mannat Dhaba <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Restaurant</td><td class="contact-cell contact-number">+919254323030</td></tr>
<tr class="contact-row" data-category="local-services"><td class="contact-cell contact-name">Laptop Repair <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Laptop Repair Service</td><td class="contact-cell contact-number">+919808888877</td></tr>
<tr class="contact-row" data-category="local-services"><td class="contact-cell contact-name">Laptop Repair <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Laptop Repair Service</td><td class="contact-cell contact-number">+919896030740</td></tr>
<tr class="contact-row" data-category="local-services"><td class="contact-cell contact-name">Laptop Repair <span class="star-icon">‚òÜ</span></td><td class="contact-cell contact-profession">Laptop Repair Service</td><td class="contact-cell contact-number">+919653575260</td></tr>
</tbody>
</table>
<div class="no-results" id="noResults" style="display:none">
<div class="no-results-icon">üîç</div>
<div>No contacts found matching your search criteria.</div>
<div class="no-results-subtext">Try searching with different keywords or clear your search to view all contacts.</div>
</div>
</div>
</main>
<script>
document.addEventListener('DOMContentLoaded', () => {
    // ---ELEMENT REFERENCES ---
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const clearButton = document.getElementById('clearButton');
    const showStarredButton = document.getElementById('showStarredButton');
    const allRows = document.querySelectorAll('.contact-row');
    const resultsCounter = document.getElementById('resultsCounter');
    const noResultsDiv = document.getElementById('noResults');
    const tables = document.querySelectorAll('.contact-table');
    const allStarIcons = document.querySelectorAll('.star-icon');

    // --- STATE MANAGEMENT ---
    const STORAGE_KEY = 'campusji_starred_contacts';
    let isShowingStarred = false; // Filter state for starred contacts

    // --- CORE FUNCTIONS ---

    // Creates a unique ID for a contact to use in localStorage
    const getContactId = (row) => {
        const name = row.querySelector('.contact-name').innerText.replace('‚òÜ', '').replace('‚òÖ', '').trim();
        const profession = row.querySelector('.contact-profession').innerText.trim();
        return `${name}-${profession}`;
    };

    // Loads which contacts are starred from the browser's local storage
    const loadStarredStatus = () => {
        const starredContacts = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
        allRows.forEach(row => {
            const contactId = getContactId(row);
            if (starredContacts[contactId]) {
                const star = row.querySelector('.star-icon');
                star.classList.add('starred');
                star.textContent = '‚òÖ';
            }
        });
    };

    // Saves the current set of starred contacts to local storage
    const saveStarredStatus = () => {
        const starredContacts = {};
        document.querySelectorAll('.star-icon.starred').forEach(star => {
            const contactId = getContactId(star.closest('.contact-row'));
            starredContacts[contactId] = true;
        });
        localStorage.setItem(STORAGE_KEY, JSON.stringify(starredContacts));
    };

    // Master function to filter and display contacts based on all active criteria
    const filterAndDisplayContacts = () => {
        const searchTerm = searchInput.value.toLowerCase().trim();
        let visibleCount = 0;

        // 1. Filter individual rows
        allRows.forEach(row => {
            const isStarred = row.querySelector('.star-icon').classList.contains('starred');
            const rowText = row.textContent.toLowerCase();
            
            const matchesSearch = searchTerm === '' || rowText.includes(searchTerm);
            const matchesStarredFilter = !isShowingStarred || isStarred;

            if (matchesSearch && matchesStarredFilter) {
                row.style.display = ''; // Use default table display
                visibleCount++;
            } else {
                row.style.display = 'none';
            }
        });
        
        // 2. Update the results counter message
        resultsCounter.textContent = `Showing ${visibleCount} of ${allRows.length} contacts`;
        noResultsDiv.style.display = visibleCount === 0 ? 'block' : 'none';
        
        // 3. Hide empty table sections (including headers)
        tables.forEach(table => {
            const body = table.querySelector('tbody');
            if (body) {
                const hasVisibleRows = Array.from(body.querySelectorAll('.contact-row')).some(r => r.style.display !== 'none');
                let header = body.previousElementSibling;
                while (header && header.tagName === 'THEAD') {
                    header.style.display = hasVisibleRows ? '' : 'none';
                    header = header.previousElementSibling;
                }
            }
        });
    };

    // --- EVENT LISTENERS ---

    // When a star icon is clicked
    allStarIcons.forEach(star => {
        star.addEventListener('click', (event) => {
            event.stopPropagation();
            star.classList.toggle('starred');
            star.textContent = star.classList.contains('starred') ? '‚òÖ' : '‚òÜ';
            saveStarredStatus();
            filterAndDisplayContacts(); // Re-apply filters instantly
        });
    });

    // When the "Show Starred" button is clicked
    showStarredButton.addEventListener('click', () => {
        isShowingStarred = !isShowingStarred; // Toggle the filter state
        if (isShowingStarred) {
            showStarredButton.textContent = 'Show All';
            showStarredButton.classList.add('active');
        } else {
            showStarredButton.textContent = 'Show Starred ‚òÖ';
            showStarredButton.classList.remove('active');
        }
        filterAndDisplayContacts();
    });

    // Search and Clear button actions
    searchButton.addEventListener('click', filterAndDisplayContacts);
    searchInput.addEventListener('keyup', filterAndDisplayContacts); // Live search
    clearButton.addEventListener('click', () => {
        searchInput.value = '';
        filterAndDisplayContacts();
    });

    // --- INITIALIZATION ---
    loadStarredStatus();
    filterAndDisplayContacts(); // Run once on page load
});
</script>
</body>
</html>
